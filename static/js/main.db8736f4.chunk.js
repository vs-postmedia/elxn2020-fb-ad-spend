(this["webpackJsonpad-spend-tracker"]=this["webpackJsonpad-spend-tracker"]||[]).push([[0],{117:function(t,a,e){t.exports=e(153)},139:function(t,a,e){},140:function(t,a,e){},142:function(t,a,e){},143:function(t,a,e){},144:function(t,a,e){},145:function(t,a,e){},146:function(t,a,e){},147:function(t,a,e){},148:function(t,a,e){t.exports=e.p+"static/media/Shift-Bold.cdd38a86.otf"},149:function(t,a,e){t.exports=e.p+"static/media/BentonSansCond-Regular.43cd4ac7.otf"},150:function(t,a,e){t.exports=e.p+"static/media/BentonSansCond-RegItalic.69a4217c.otf"},151:function(t,a,e){t.exports=e.p+"static/media/BentonSansCond-Bold.6f6753fd.otf"},152:function(t,a,e){t.exports=e.p+"static/media/BentonSansCond-BoldItalic.a6640d89.otf"},153:function(t,a,e){"use strict";e.r(a);var n=e(0),o=e.n(n),r=e(38),c=e.n(r),i=e(39),s=e(40),l=e(45),d=e(43),u=e(41),p=e.n(u),m=["Jan.","Feb.","Mar.","Apr.","May","June","July","Aug.","Sept.","Oct.","Nov.","Dec."],f={numberWithCommas:function(t){return t.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")},map:function(t,a,e,n,o){return(t-a)*(o-n)/(e-a)+n},getPostmediaMonth:function(t){return m[t]}},h=(e(139),function(t){return o.a.createElement("div",{className:"stat"},o.a.createElement("p",{className:"big-num ".concat(t.data.party.toLowerCase())},"$".concat(f.numberWithCommas(t.data.total))),o.a.createElement("p",{className:"label"},t.data.party))}),y=(e(140),function(t){var a=t.data,e=t.lastUpdate.split("-"),n=f.getPostmediaMonth(parseInt(e[1])-1),r=e[2];return o.a.createElement("div",{className:"summary-box"},o.a.createElement("div",{className:"stat-box"},a.map((function(t,a){return o.a.createElement(h,{data:t,key:a})}))),o.a.createElement("p",{className:"last-update"},"From Sept. 21 to ".concat(n," ").concat(r)))}),g=e(2),b=e.n(g),v=e(14),w=e(42),x=e(3),k=e(44),E=e(19),_=e(6),B=(e(142),_.a("%B %d"));var C,N,S,j,F,O=function(t){var a=t.path[0].__data__.total,e=t.path[0].__data__.date;return'\n\t\t<div class="tooltip-content">\n\t\t\t<p class="date">'.concat(B(e),'</p>\n\t\t\t<p class="total-amount">$').concat(f.numberWithCommas(a),"</p>\n\t\t</div>\n\t")},W=(e(143),Object(k.a)()),A={top:10,right:25,bottom:40,left:45};function I(){return(I=Object(w.a)(b.a.mark((function t(a){var e,n,o,r;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,L(a);case 2:e=t.sent,n=x.f("#charts"),o=n.node().getBoundingClientRect(),N=(o.height-A.bottom-A.top)/3,S=o.width-A.left,window.innerWidth>600&&(N=o.height,S=o.width/3-A.left-A.right),C=U(N,A),(r=n.selectAll("svg").data(e).enter().append("svg").attr("class",(function(t){return t.party.toLowerCase()})).style("height","".concat(N,"px")).style("width","".concat(S+A.left,"px")).append("g").attr("transform","translate(".concat(A.left,", ").concat(A.top,")"))).append("text").text((function(t){return t.party})).attr("class",(function(t){return"".concat(t.party.toLowerCase()," label-text")})),j=T(e[0].values),F=P(e[0].values),r.append("g").call($),r.append("g").call(R),r.append("g").selectAll("rect").data((function(t){return t.values})).enter().append("rect").attr("x",(function(t){return j(t.date)})).attr("y",(function(t){return F(t.total)})).attr("height",(function(t){return F(0)-F(t.total)})).attr("width",j.bandwidth()).on("mouseover",J).on("mouseout",D),r.append("g").attr("class","annotation-group").call(M);case 17:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var M=function(){E.a().type(E.b).accessors({x:function(t){return console.log(j),j(new Date(t.x))},y:function(t){return console.log(F),F(t.y)}}).annotations(C).textWrap(30)},D=function(t){W.hide()},J=function(t){W.point(t.clientX,t.clientY),W.html(O(t)),W.draw()},L=function(t){var a=t.data,e=t.order;return a.forEach((function(t){t.values.forEach((function(t){t.date=x.h("%Y-%m-%d")(t.date)}))})),[].concat(Object(v.a)(a.filter((function(t){return t.party===e[0]}))),Object(v.a)(a.filter((function(t){return t.party===e[1]}))),Object(v.a)(a.filter((function(t){return t.party===e[2]}))))},U=function(t,a){return[{className:"annotation-text",data:{x:"09/21/2020"},note:{align:"middle",title:"Election called"},subject:{y1:a.top+25,y2:t-a.bottom},y:a.top-15}]},$=function(t){var a=j.domain();t.attr("transform","translate(0, ".concat(N-A.bottom,")")).attr("class","x-axis axis").call(x.a(j).tickSize(0).tickFormat(x.g("%b. %d")).tickPadding([10]).tickValues([a[0],a[a.length-1]]))},R=function(t){t.attr("class","y-axis axis").call(x.b(F).ticks(5).tickSize(-S).tickFormat((function(t){return"$".concat(f.numberWithCommas(t))}))).call((function(t){return t.select(".domain").remove()}))},P=function(t){return x.e().domain([0,x.c(t,(function(t){return parseInt(t.total)}))]).nice().range([N-A.bottom,A.top])},T=function(t){return x.d().rangeRound([0,S],.5).padding(.1).domain(t.map((function(t){return t.date})))},z=function(t){return I.apply(this,arguments)},Y=(e(144),function(t){return Object(n.useEffect)((function(){z(t)})),o.a.createElement("div",{className:"daily-charts"},o.a.createElement("h2",null,"Daily Facebook ad spend"),o.a.createElement("div",{id:"charts"}),o.a.createElement("p",{className:"source"},"Source: ",o.a.createElement("a",{href:"https://www.facebook.com/ads/library/",target:"_blank",rel:"noopener noreferrer"},"Facebook Ad Library")," \u2022 NOTE: Liberal party spending includes ads run under the \u201cAndrew Wilkinson for B.C.\u201d Facebook page. The minimum daily total provided by Facebook is $100, so parties may have spent less on those days. Data includes ads placed on Facebook, Instagram, WhatsApp and Messenger."))}),V=(e(145),function(t){Object(l.a)(e,t);var a=Object(d.a)(e);function e(){var t;Object(i.a)(this,e);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(t=a.call.apply(a,[this].concat(o))).state={party_data:[],party_daily:[]},t}return Object(s.a)(e,[{key:"componentDidMount",value:function(){var t=this;p.a.get(this.props.dataUrl).then((function(a){t.setState({last_update:a.data.lastUpdate,party_data:a.data.party_total,party_daily:a.data.party_daily,party_order:a.data.party_total.map((function(t){return t.party}))})}))}},{key:"render",value:function(){return this.state.party_data.length>0?o.a.createElement(n.Fragment,null,o.a.createElement(y,{className:"summary-box",data:this.state.party_data,lastUpdate:this.state.last_update}),o.a.createElement(Y,{data:this.state.party_daily,order:this.state.party_order})):o.a.createElement(n.Fragment,null)}}]),e}(n.Component));e(146);var X=function(){return o.a.createElement("div",{className:"App"},o.a.createElement("h1",null,"This is how much each party has spent on Facebook ads since the election was called"),o.a.createElement(V,{dataUrl:"https://vs-postmedia-data.sfo2.digitaloceanspaces.com/elxn/ad-spend.json"}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));e(147),e(148),e(37),e(149),e(150),e(151),e(152);c.a.render(o.a.createElement(X,null),document.getElementById("app")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()}))},37:function(t,a,e){t.exports=e.p+"static/media/Shift-BoldItalic.5c3edbfd.otf"}},[[117,1,2]]]);
//# sourceMappingURL=main.db8736f4.chunk.js.map